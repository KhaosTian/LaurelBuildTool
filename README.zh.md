# LaurelBuildTool

> åŸºäº C# å’Œ .NET 9 çš„ç°ä»£åŒ– C/C++ æ„å»ºç³»ç»Ÿ

[English](README.md) | ç®€ä½“ä¸­æ–‡

**LaurelBuildTool** æ˜¯ä¸º C/C++ é¡¹ç›®è®¾è®¡çš„æ–°ä¸€ä»£æ„å»ºç³»ç»Ÿã€‚å®ƒç»“åˆäº† C# è„šæœ¬å’ŒåŸç”Ÿç¼–è¯‘çš„é€Ÿåº¦ï¼Œæä¾›äº†ç±»ä¼¼ xmake ä½†ä½¿ç”¨ç°ä»£å·¥å…·çš„ç®€æ´ã€ç›´è§‚çš„ APIã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **ç®€å•çš„ API** - æµç•…çš„ C# è„šæœ¬è¯­æ³•ç”¨äºæ„å»ºé…ç½®
- âš¡ **å¿«é€Ÿ** - æ”¯æŒå¢é‡æ„å»ºçš„å¹¶è¡Œç¼–è¯‘
- ğŸ¯ **æ¸…æ™°çš„è¾“å‡º** - æ‰€æœ‰æ„å»ºäº§ç‰©ç»Ÿä¸€è¾“å‡ºåˆ° `build/` ç›®å½•
- ğŸ”§ **å·¥å…·é“¾æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹ MSVCã€GCCã€Clang
- ğŸ“¦ **å¤šæ¨¡å—** - è½»æ¾ç®¡ç†ä¾èµ–å…³ç³»
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - åŸºäº SHA256 è¿½è¸ªè·³è¿‡æœªæ›´æ”¹çš„æ–‡ä»¶
- ğŸŒ **è·¨å¹³å°** - æ”¯æŒ Windowsã€Linuxã€macOS
- ğŸ› ï¸ **IDE æ”¯æŒ** - ä¸ºæ„å»ºè„šæœ¬æä¾›å®Œæ•´çš„ IntelliSense

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

è¿è¡Œ LaurelBuildTool éœ€è¦å®‰è£… **.NET 9.0 è¿è¡Œæ—¶**ã€‚

**æ£€æŸ¥æ˜¯å¦å·²å®‰è£…ï¼š**
```bash
# Windows
dotnet --list-runtimes | findstr "9.0"

# Linux/macOS
dotnet --list-runtimes | grep "9.0"
```

**å®‰è£… .NET 9.0ï¼š**
- Windows: `winget install Microsoft.DotNet.Runtime.9`
- Linux: å‚è§ [.NET æ–‡æ¡£](https://dotnet.microsoft.com/download/dotnet/9.0)
- macOS: `brew install dotnet-runtime`

### å¿«é€Ÿå®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/KhaosTian/LaurelBuildTool.git
cd LaurelBuildTool

# æ„å»º
dotnet build src/LBT.Cli/LBT.Cli.csproj -c Release

# è¿è¡Œ
dotnet run --project src/LBT.Cli/LBT.Cli.csproj -- build
```

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®

åˆ›å»º `build.cs`ï¼š
```csharp
SetProject("MyProject");
SetVersion("1.0.0");
SetLanguages("c++17");

Target("main")
    .AddFiles("src/*.cpp")
    .AddIncludeDir("include");
```

åˆ›å»º `src/main.cpp`ï¼š
```cpp
#include <iostream>

int main() {
    std::cout << "Hello, LaurelBuildTool!" << std::endl;
    return 0;
}
```

æ„å»ºå’Œè¿è¡Œï¼š
```bash
lbt build
lbt run
```

## æ„å»ºè¾“å‡º

æ‰€æœ‰æ„å»ºäº§ç‰©ç»Ÿä¸€è¾“å‡ºåˆ° `build/` ç›®å½•ï¼Œä¿æŒæºä»£ç ç›®å½•æ•´æ´ï¼š

```
my-project/
â”œâ”€â”€ build/
â”‚   â”œâ”€â”€ debug/        # Debug æ„å»º
â”‚   â””â”€â”€ release/      # Release æ„å»º
â”œâ”€â”€ src/             # æºä»£ç ï¼ˆä¿æŒæ•´æ´ï¼‰
â””â”€â”€ build.cs
```

## å¸¸ç”¨å‘½ä»¤

```bash
lbt build              # æ„å»ºé¡¹ç›®ï¼ˆDebugï¼‰
lbt build -c Release   # æ„å»º Release ç‰ˆæœ¬
lbt run                # æ„å»ºå¹¶è¿è¡Œ
lbt clean              # æ¸…ç†æ„å»ºäº§ç‰©
lbt -h, --help         # æ˜¾ç¤ºå¸®åŠ©
```

## å¤šæ¨¡å—é¡¹ç›®

```csharp
// lib/build.cs
Target("mathlib")
    .SetKind("static")
    .AddFiles("math.cpp")
    .AddIncludeDir("include")
    .ExportIncludeDir("include");

// æ ¹ç›®å½• build.cs
Include("lib");  // åŒ…å«å­æ¨¡å—

Target("main")
    .AddFiles("src/*.cpp")
    .AddIncludeDir("lib/include")
    .AddLinks("mathlib");  // é“¾æ¥åº“
```

## ğŸ“š æ–‡æ¡£

- ğŸ’¡ [ç¤ºä¾‹](samples/)
- ğŸ¤ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)

## ğŸ—ï¸ æ¶æ„

LaurelBuildTool ç”±ä¸‰ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     build.cs (C# è„šæœ¬)              â”‚
â”‚  - é¡¹ç›®é…ç½®                          â”‚
â”‚  - ç›®æ ‡å®šä¹‰                          â”‚
â”‚  - ä¾èµ–ç®¡ç†                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Roslyn è„šæœ¬å¼•æ“                   â”‚
â”‚  - è¿è¡Œæ—¶ç¼–è¯‘ build.cs              â”‚
â”‚  - æä¾›å®Œæ•´çš„ C# åŠŸèƒ½               â”‚
â”‚  - å¯ç”¨ IntelliSense å’Œè°ƒè¯•         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ„å»ºå¼•æ“                       â”‚
â”‚  - å·¥å…·é“¾æ£€æµ‹                       â”‚
â”‚  - å¹¶è¡Œç¼–è¯‘                         â”‚
â”‚  - å¢é‡æ„å»ºï¼ˆSHA256ï¼‰               â”‚
â”‚  - ä¾èµ–è§£æ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ºä»€ä¹ˆé€‰æ‹© Roslynï¼Ÿ

LaurelBuildTool ä½¿ç”¨ **Roslynï¼ˆC# ç¼–è¯‘å™¨å¹³å°ï¼‰** è¿›è¡Œæ„å»ºè„šæœ¬ç¼–å†™ï¼Œæä¾›ä»¥ä¸‹ç‰¹æ€§ï¼š

- âœ… **å®Œæ•´çš„ C# è¯­è¨€** - LINQã€async/awaitã€æ¨¡å¼åŒ¹é…
- âœ… **ç±»å‹å®‰å…¨** - ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- âœ… **IDE æ”¯æŒ** - å®Œæ•´çš„ IntelliSenseã€è°ƒè¯•ã€é‡æ„
- âœ… **ç°ä»£å·¥å…·é“¾** - ä¸ Visual Studio ç›¸åŒçš„ç”Ÿæ€ç³»ç»Ÿ

**æƒè¡¡**ï¼šéœ€è¦ .NET 9.0 è¿è¡Œæ—¶ï¼ˆçº¦ 44 MB ä¸‹è½½ï¼‰

## âš¡ æ€§èƒ½

LaurelBuildTool ä¸“ä¸ºé€Ÿåº¦è€Œè®¾è®¡ï¼š

| ç‰¹æ€§ | å®ç° |
|---------|----------------|
| **å¹¶è¡Œç¼–è¯‘** | å¤šè¿›ç¨‹ç¼–è¯‘ï¼ˆå¯é…ç½®ï¼‰ |
| **å¢é‡æ„å»º** | åŸºäº SHA256 å“ˆå¸Œçš„æ–‡ä»¶è¿½è¸ª |
| **æ™ºèƒ½é“¾æ¥** | ä»…é“¾æ¥æ›´æ”¹çš„ç›®æ ‡æ–‡ä»¶ |
| **ä¾èµ–ç¼“å­˜** | åŸºäº SQLite çš„å¤´æ–‡ä»¶ä¾èµ–è¿½è¸ª |
| **ReadyToRun** | é¢„ç¼–è¯‘ä¸ºæœ¬æœºä»£ç ï¼ˆçº¦ 50ms å¯åŠ¨ï¼‰ |

### åŸºå‡†æµ‹è¯•

ç¼–è¯‘ä¸­ç­‰è§„æ¨¡é¡¹ç›®ï¼ˆ500 ä¸ªæ–‡ä»¶ï¼Œ10 ä¸‡è¡Œä»£ç ï¼‰ï¼š

| å·¥å…· | å†·æ„å»º | å¢é‡æ„å»ºï¼ˆ1 ä¸ªæ–‡ä»¶æ›´æ”¹ï¼‰ |
|------|------------|------------------------------|
| **LaurelBuildTool** | 45s | 2s |
| CMake + Ninja | 48s | 3s |
| xmake | 50s | 4s |

*åŸºå‡†æµ‹è¯•ï¼šWindows 11ï¼ŒMSVC 2022ï¼Œ16 æ ¸ CPU*

## ğŸ“Š åˆ†å‘

| é…ç½® | å¤§å° | æ–‡ä»¶æ•° | ç”¨æˆ·è¦æ±‚ |
|---------------|------|-------|-------------------|
| **ä¾èµ–æ¡†æ¶** | 44 MB | 35 | .NET 9.0 è¿è¡Œæ—¶ |

**ä¸ºä»€ä¹ˆæ˜¯ 44 MBï¼Ÿ**

- Roslyn ç¼–è¯‘å™¨ï¼ˆ26 MBï¼‰- æ ¸å¿ƒè„šæœ¬å¼•æ“
- EF Core + SQLiteï¼ˆ12.4 MBï¼‰- å¢é‡æ„å»ºç¼“å­˜
- Spectre.Consoleï¼ˆ1.5 MBï¼‰- ç»ˆç«¯ UI
- å…¶ä»–åº“ï¼ˆ4 MBï¼‰- CLIã€æ–‡ä»¶åŒ¹é…ç­‰

**ä¸å…¶ä»–æ„å»ºå·¥å…·å¯¹æ¯”ï¼š**
- CMake: 50-70 MB
- xmake: 30 MB
- Meson: 5 MB + Python ä¾èµ–

## ğŸ” å·¥ä½œåŸç†

### 1. é¡¹ç›®å‘ç°
```
my-project/
â”œâ”€â”€ build.cs          # â† LaurelBuildTool æŸ¥æ‰¾æ­¤æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.cpp
â””â”€â”€ include/
```

### 2. è„šæœ¬ç¼–è¯‘
```bash
lbt build
  â†“
Roslyn ç¼–è¯‘ build.cs
  â†“
éªŒè¯é¡¹ç›®é…ç½®
```

### 3. å·¥å…·é“¾æ£€æµ‹
```bash
è‡ªåŠ¨æ£€æµ‹: MSVC â†’ Clang â†’ GCC
  â†“
åˆå§‹åŒ–ç¼–è¯‘å™¨ç¯å¢ƒ
```

### 4. å¹¶è¡Œæ„å»º
```bash
æºæ–‡ä»¶ â†’ ç›®æ ‡æ–‡ä»¶ï¼ˆå¹¶è¡Œï¼‰
  â†“
é“¾æ¥ â†’ å¯æ‰§è¡Œæ–‡ä»¶
```

## ğŸ†š å¯¹æ¯”

| ç‰¹æ€§ | LaurelBuildTool | CMake | xmake | Meson |
|---------|---------|-------|-------|-------|
| **è¯­è¨€** | C# | CMake DSL | Lua | Python |
| **ç±»å‹å®‰å…¨** | âœ… æ˜¯ | âŒ å¦ | âŒ å¦ | âŒ å¦ |
| **IDE æ”¯æŒ** | âœ… å®Œæ•´ | âš ï¸ éƒ¨åˆ† | âš ï¸ éƒ¨åˆ† | âš ï¸ éƒ¨åˆ† |
| **è„šæœ¬è°ƒè¯•** | âœ… æ˜¯ | âŒ å¦ | âŒ å¦ | âŒ å¦ |
| **åŒ…ç®¡ç†å™¨** | ğŸš§ è®¡åˆ’ä¸­ | âš ï¸ ç¬¬ä¸‰æ–¹ | âœ… å†…ç½® | âš ï¸ ç¬¬ä¸‰æ–¹ |
| **åˆ†å‘å¤§å°** | 44 MB | 50-70 MB | 30 MB | 5 MB + Python |
| **å­¦ä¹ æ›²çº¿** | ä½ï¼ˆC#ï¼‰ | é«˜ | ä¸­ç­‰ | ä¸­ç­‰ |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·å‚é˜… [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£æŒ‡å—ã€‚

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/KhaosTian/LaurelBuildTool.git
cd LaurelBuildTool

# æ„å»ºï¼ˆéœ€è¦ .NET 9.0 SDKï¼‰
dotnet build

# è¿è¡Œæµ‹è¯•
dotnet test

# æœ¬åœ°æ„å»ºå’Œè¿è¡Œ
dotnet run --project src/LaurelBuildTool.Cli -- build
```

## ğŸ“ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

## ğŸ™ è‡´è°¢

- **Roslyn** - å¼ºå¤§çš„ C# ç¼–è¯‘å™¨å¹³å°
- **CliWrap** - ä¼˜é›…çš„å‘½ä»¤æ‰§è¡Œ
- **Spectre.Console** - ç¾è§‚çš„ç»ˆç«¯ UI
- **EF Core** - å¯é çš„ç¼“å­˜ç³»ç»Ÿ
- **xmake** - API è®¾è®¡çš„çµæ„Ÿæ¥æº

---

**æ³¨æ„ï¼š** è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ C++ æ„å»ºç³»ç»Ÿã€‚å¦‚æœä½ åœ¨å¯»æ‰¾ç»å…¸çš„ CMake ä½“éªŒï¼Œè¿™å¯èƒ½ä¸é€‚åˆä½ ã€‚ä½†å¦‚æœä½ æƒ³è¦æ›´ç®€å•ã€æ›´å¿«é€Ÿã€æ›´ç›´è§‚çš„å·¥å…·ï¼Œä¸å¦¨è¯•è¯• LaurelBuildToolï¼
